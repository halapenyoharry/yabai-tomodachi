{
  "songline_protocol_v2": {
    "metadata": {
      "version": "2.1.0",
      "project_name": "fix-yabai-tomadachi",
      "created": "2025-07-30T16:02:54Z",
      "type": "development_journey",
      "purpose": "Track iterate-trash-iterate cycles with pattern learning"
    },
    
    "journey_state": {
      "current_iteration": 1,
      "approach": "code-archaeology",
      "goals": [
        "Find and restore the working version of yabai-tomadachi that Harry loved",
        "Maintain clean architecture"
      ],
      "constraints": [],
      "assumptions": []
    },
    
    "iteration_history": [
      {
        "iteration": 1,
        "timestamp": "2025-07-30T16:02:54Z",
        "approach": "code-archaeology",
        "status": "completed",
        "decisions": [
          "No existing code found - decided to recreate from concept",
          "Built both CLI and GUI versions for flexibility",
          "Used Node.js for cross-platform compatibility",
          "Added Electron for menu bar integration"
        ],
        "breakthroughs": [
          "yabai is already installed at /opt/homebrew/bin/yabai",
          "Simple exec commands work well for yabai integration",
          "Vi-like keybindings make CLI intuitive"
        ],
        "dead_ends": [
          "No GitHub repos found for yabai-tomadachi",
          "No local backup of original code"
        ],
        "lessons": [
          "Sometimes 'archaeology' means reconstruction from memory",
          "A friendly interface can make complex tools accessible",
          "Both CLI and GUI serve different use cases"
        ]
      },
      {
        "iteration": 2,
        "timestamp": "2025-07-30T17:00:00Z",
        "approach": "proper-code-archaeology",
        "status": "completed",
        "decisions": [
          "MISSION FAILURE ACKNOWLEDGED - Built something new instead of finding original",
          "Restart with proper archaeology approach",
          "Search for original yabai-tomadachi repo more thoroughly",
          "Document what MCP server component actually did"
        ],
        "breakthroughs": [
          "yabai v7.1.15 is installed and working",
          "Found many yabai menubar apps but none with MCP integration",
          "No 'yabai-tomadachi' or 'tomadachi' repos found related to yabai",
          "MCP servers for macOS exist but none for window managers"
        ],
        "dead_ends": [
          "No GitHub repo named 'yabai-tomadachi' exists",
          "No yabai + MCP server combinations found",
          "No 'tomadachi' projects related to window management"
        ],
        "lessons": [
          "The original yabai-tomadachi may have been:",
          "  - A private repo",
          "  - Under a different name",
          "  - Part of a larger project",
          "  - A local-only tool that was never published",
          "Need to understand what 'MCP server component' meant in context"
        ]
      },
      {
        "iteration": 3,
        "timestamp": "2025-08-04T01:30:00Z",
        "approach": "restoration-from-original",
        "status": "completed",
        "decisions": [
          "Found original repo at halapenyoharry/yabai-tomodachi",
          "Restored Swift menu bar app with full functionality",
          "Integrated MCP server for AI capabilities",
          "Default to BSP layout to avoid confusion"
        ],
        "breakthroughs": [
          "Original exists with Swift implementation + MCP",
          "Menu bar app fully functional with all controls",
          "Grid commands require float mode first",
          "Testing shows all features work except minor issues"
        ],
        "dead_ends": [
          "Launch scripts not suitable for packaged app",
          "Grid layout on managed windows",
          "Padding toggle visibility unclear"
        ],
        "lessons": [
          "Swift menu bar apps are more native than Node.js",
          "Default BSP layout solves initial confusion",
          "Center window needs float first",
          "Will package as proper macOS app next"
        ]
      }
    ],
    
    "pattern_library": {
      "decision_paths": [
        "Check for existing tool → Not found → Recreate from concept",
        "Choose architecture → Node.js for CLI + Electron for GUI"
      ],
      "successful_patterns": [
        "Vi-like keybindings for power users",
        "Separate CLI and GUI versions for different use cases",
        "Direct yabai command execution via exec"
      ],
      "anti_patterns": [],
      "tools_that_work": [
        "Node.js child_process for yabai integration",
        "Electron for menu bar apps",
        "readline for interactive CLI"
      ],
      "tools_that_dont": []
    },
    
    "consciousness_topology": {
      "hub_nodes": [],
      "connection_patterns": [],
      "breakthrough_triggers": []
    },
    
    "testing_strategies": {
      "ui_validation": {
        "method": "screenshot + manual",
        "automation_level": "none",
        "success_criteria": []
      },
      "functional_testing": {
        "method": "manual",
        "coverage": "basic",
        "success_criteria": [
          "CLI responds to all documented commands",
          "GUI launches and shows in menu bar",
          "yabai commands execute successfully"
        ]
      },
      "performance_testing": {
        "method": "none",
        "benchmarks": []
      }
    },
    
    "deployment_pipeline": {
      "local_testing": true,
      "staging": false,
      "production": false,
      "automation_level": "manual"
    },
    
    "next_iteration_candidates": [
      "Add more advanced window management features",
      "Create automated tests for yabai commands",
      "Add configuration file support for custom keybindings",
      "Implement window grouping and saved layouts"
    ],
    
    "trash_decision_factors": [
      "fundamental_architecture_mismatch",  
      "tool_limitations_blocking_progress",
      "complexity_exceeds_benefit",
      "better_approach_discovered"
    ],
    
    "preservation_targets": [
      "core_insights",
      "working_code_patterns", 
      "successful_tool_combinations",
      "user_experience_discoveries"
    ]
  }
}